!function(a){a.fn.passwordStrength=function(b){var c,b,e,f,d=this;c={id:null,color:["gray","orange"],weak:["asdfgh","qwerty","zxcvbn","Password","Passwd","Woaini","Iloveyou","Woaiwojia","521521","5201314","7758521","1314520","1314521","520520","201314","211314","7758258","147258369","159357","123456","1234567","12345678","123456789","654321","123123","123321","123abc"],tips:{0:"请输入密码",1:"长度不对",2:"弱密码，建议修改",success:"可用"},eyes:!0,eyesArr:["&#xe638;","&#xe639;"],len:[6,20],type:0,callback:null},b=a.extend(c,b),e={bar:a("<div>").addClass("m_pBar"),levelBar:a("<p>").addClass("m_pLevelBar"),levelColor:a("<span>").addClass("m_pLevelColor").css("background",b.color[1]),eyes:a("<a>").attr("href","javascript:;").addClass("ic_eyes iconfont"),tips:a("<span>").addClass("u_tips").html(b.tips[0])},f={init:function(){d.parent().append(e.bar),e.bar.append(d),1==b.eyes&&(e.eyes.html(b.eyesArr[0]),e.bar.append(e.eyes),e.eyes.mousedown(function(){a(this).html(b.eyesArr[1]),d.prop("type","text")}),e.eyes.mouseup(function(){a(this).html(b.eyesArr[0]),d.prop("type","password")})),e.bar.append(e.tips),e.levelBar.append(e.levelColor),e.bar.append(e.levelBar),d.keyup(function(){f.ver(a(this).val())})},ver:function(a){var c=a.length,d=b["weak"].length,g=0;if(6>c)return e.tips.html(b.tips[1]),!1;for(;d>g;g++)if(a==b["weak"][g])return e.tips.html(b.tips[2]),f.countResult(2),!1;f.countScroe(a),e.tips.html(b.tips.success)},countScroe:function(a){var b=0,c=a.length,d=/[a-z]/,e=/[A-Z]/,g=d.test(a),h=e.test(a),i=a.replace(/\D/g,"").length,j=a.replace(/[a-zA-Z0-9]/g,"").length,k=bAbc=bSign=!1;6>c?b+=0:c>=6&&10>=c?b+=10:c>10&&(b+=25),b+=0==g&&0==h?0:1==g&&1==h?25:10,i>0&&2>=i?b+=10:i>2&&(b+=20),1==j?b+=10:j>1&&(b+=25),i>0&&(k=!0),(1==g||1==h)&&(bAbc=!0),j>0&&(bSign=!0),k&&bSign&&bAbc?b+=5:!bAbc&&k&&bSign?b+=3:bAbc&&!k&&bSign?b+=3:bAbc&&k&&!bSign&&(b+=2),f.countResult(f.countLevel(b))},countLevel:function(a){var b=0;return a>=90?b=8:a>=80&&90>a?b=7:a>=70&&80>a?b=6:a>=60&&70>a?b=5:a>=30&&60>a?b=4:a>=25&&30>a?b=3:a>0?b=2:(a=0)&&(b=1),b},countResult:function(a){a>=5?e.levelColor.animate({width:"100%"}):4==a?e.levelColor.animate({width:"66.7%"}):a>1&&4>a?e.levelColor.animate({width:"33.4%"}):e.levelColor.animate({width:0})}},f.init(b,e)}}(jQuery);